{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/devan/Downloads/youtube2022-react-chat/youtube2022-react-chat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\devan\\\\Downloads\\\\youtube2022-react-chat\\\\youtube2022-react-chat\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";// import { initializeApp } from \"firebase/app\";\n// import { getAuth } from \"firebase/auth\";\n// import { getStorage } from \"firebase/storage\";\n// import { getFirestore } from \"firebase/firestore\";\n// const API_KEY = process.env.REACT_APP_FIREBASE_KEY\n// const firebaseConfig = {\n//   apiKey: API_KEY,\n//   authDomain: \"chat-engine-8dbde.firebaseapp.com\",\n//   projectId: \"chat-engine-8dbde\",\n//   storageBucket: \"chat-engine-8dbde.appspot.com\",\n//   messagingSenderId: \"654735497077\",\n//   appId: \"1:654735497077:web:e95d3917f9a3035db5653c\",\n//   measurementId: \"G-2355KSKVN7\"\n// };\n// export const app = initializeApp(firebaseConfig);\n// export const auth = getAuth();\n// export const storage = getStorage();\n// export const db = getFirestore()\nimport{initializeApp}from\"firebase/app\";import{getAuth}from\"firebase/auth\";import{getStorage}from\"firebase/storage\";import{getFirestore}from\"firebase/firestore\";import{getMessaging,getToken,onMessage}from\"firebase/messaging\";// Import Firebase Messaging\nimport{useEffect}from\"react\";var API_KEY=process.env.REACT_APP_FIREBASE_KEY;var firebaseConfig={apiKey:API_KEY,authDomain:\"chat-engine-8dbde.firebaseapp.com\",projectId:\"chat-engine-8dbde\",storageBucket:\"chat-engine-8dbde.appspot.com\",messagingSenderId:\"654735497077\",appId:\"1:654735497077:web:e95d3917f9a3035db5653c\",measurementId:\"G-2355KSKVN7\"};console.log(API_KEY);var requestNotificationPermission=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var permission;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Notification.requestPermission();case 3:permission=_context.sent;if(permission===\"granted\"){console.log(\"Notification permission granted.\");}else{console.log(\"Notification permission denied.\");}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(\"Error requesting notification permission:\",_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function requestNotificationPermission(){return _ref.apply(this,arguments);};}();requestNotificationPermission();// Initialize Firebase\nexport var app=initializeApp(firebaseConfig);export var auth=getAuth();export var storage=getStorage();export var db=getFirestore();// Initialize Firebase Messaging\nvar messaging=getMessaging();// Request permission to receive notifications\n// Get the FCM token for the user\nvar getFCMToken=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var token;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return getToken(messaging);case 3:token=_context2.sent;console.log(\"FCM Token:\",token);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error(\"Error getting FCM token:\",_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function getFCMToken(){return _ref2.apply(this,arguments);};}();// Handle incoming notifications\nvar handleNotifications=function handleNotifications(){onMessage(messaging,function(payload){console.log(\"Received a notification:\",payload);// You can customize how to handle the incoming notification here\n// For example, display a notification to the user\nvar _payload$notification=payload.notification,title=_payload$notification.title,body=_payload$notification.body;new Notification(title,{body:body});});};// Component to initialize notification setup\nvar FirebaseNotificationSetup=function FirebaseNotificationSetup(){useEffect(function(){requestNotificationPermission();getFCMToken();handleNotifications();},[]);return null;};export default FirebaseNotificationSetup;","map":{"version":3,"sources":["C:/Users/devan/Downloads/youtube2022-react-chat/youtube2022-react-chat/src/firebase.js"],"names":["initializeApp","getAuth","getStorage","getFirestore","getMessaging","getToken","onMessage","useEffect","API_KEY","process","env","REACT_APP_FIREBASE_KEY","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","console","log","requestNotificationPermission","Notification","requestPermission","permission","error","app","auth","storage","db","messaging","getFCMToken","token","handleNotifications","payload","notification","title","body","FirebaseNotificationSetup"],"mappings":"qUAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAuBA,OAASA,aAAT,KAA8B,cAA9B,CACA,OAASC,OAAT,KAAwB,eAAxB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,YAAT,KAA6B,oBAA7B,CACA,OAASC,YAAT,CAAuBC,QAAvB,CAAiCC,SAAjC,KAAkD,oBAAlD,CAAwE;AACxE,OAASC,SAAT,KAA0B,OAA1B,CAEA,GAAMC,CAAAA,OAAO,CAAGC,OAAO,CAACC,GAAR,CAAYC,sBAA5B,CACA,GAAMC,CAAAA,cAAc,CAAG,CACrBC,MAAM,CAAEL,OADa,CAErBM,UAAU,CAAE,mCAFS,CAGrBC,SAAS,CAAE,mBAHU,CAIrBC,aAAa,CAAE,+BAJM,CAKrBC,iBAAiB,CAAE,cALE,CAMrBC,KAAK,CAAE,2CANc,CAOrBC,aAAa,CAAE,cAPM,CAAvB,CAUAC,OAAO,CAACC,GAAR,CAAYb,OAAZ,EACA,GAAMc,CAAAA,6BAA6B,0FAAG,wLAETC,CAAAA,YAAY,CAACC,iBAAb,EAFS,QAE5BC,UAF4B,eAGlC,GAAIA,UAAU,GAAK,SAAnB,CAA8B,CAC5BL,OAAO,CAACC,GAAR,CAAY,kCAAZ,EACD,CAFD,IAEO,CACLD,OAAO,CAACC,GAAR,CAAY,iCAAZ,EACD,CAPiC,+EASlCD,OAAO,CAACM,KAAR,CAAc,2CAAd,cATkC,oEAAH,kBAA7BJ,CAAAA,6BAA6B,0CAAnC,CAYAA,6BAA6B,GAC7B;AACA,MAAO,IAAMK,CAAAA,GAAG,CAAG3B,aAAa,CAACY,cAAD,CAAzB,CACP,MAAO,IAAMgB,CAAAA,IAAI,CAAG3B,OAAO,EAApB,CACP,MAAO,IAAM4B,CAAAA,OAAO,CAAG3B,UAAU,EAA1B,CACP,MAAO,IAAM4B,CAAAA,EAAE,CAAG3B,YAAY,EAAvB,CAEP;AACA,GAAM4B,CAAAA,SAAS,CAAG3B,YAAY,EAA9B,CAEA;AAGA;AACA,GAAM4B,CAAAA,WAAW,2FAAG,0LAEI3B,CAAAA,QAAQ,CAAC0B,SAAD,CAFZ,QAEVE,KAFU,gBAGhBb,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0BY,KAA1B,EAHgB,mFAKhBb,OAAO,CAACM,KAAR,CAAc,0BAAd,eALgB,sEAAH,kBAAXM,CAAAA,WAAW,2CAAjB,CASA;AACA,GAAME,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAM,CAChC5B,SAAS,CAACyB,SAAD,CAAY,SAACI,OAAD,CAAa,CAChCf,OAAO,CAACC,GAAR,CAAY,0BAAZ,CAAwCc,OAAxC,EACA;AACA;AACA,0BAAwBA,OAAO,CAACC,YAAhC,CAAQC,KAAR,uBAAQA,KAAR,CAAeC,IAAf,uBAAeA,IAAf,CACA,GAAIf,CAAAA,YAAJ,CAAiBc,KAAjB,CAAwB,CAAEC,IAAI,CAAJA,IAAF,CAAxB,EACD,CANQ,CAAT,CAOD,CARD,CAUA;AACA,GAAMC,CAAAA,yBAAyB,CAAG,QAA5BA,CAAAA,yBAA4B,EAAM,CACtChC,SAAS,CAAC,UAAM,CACde,6BAA6B,GAC7BU,WAAW,GACXE,mBAAmB,GACpB,CAJQ,CAIN,EAJM,CAAT,CAMA,MAAO,KAAP,CACD,CARD,CAUA,cAAeK,CAAAA,yBAAf","sourcesContent":["// import { initializeApp } from \"firebase/app\";\n// import { getAuth } from \"firebase/auth\";\n// import { getStorage } from \"firebase/storage\";\n// import { getFirestore } from \"firebase/firestore\";\n// const API_KEY = process.env.REACT_APP_FIREBASE_KEY\n// const firebaseConfig = {\n//   apiKey: API_KEY,\n//   authDomain: \"chat-engine-8dbde.firebaseapp.com\",\n//   projectId: \"chat-engine-8dbde\",\n//   storageBucket: \"chat-engine-8dbde.appspot.com\",\n//   messagingSenderId: \"654735497077\",\n//   appId: \"1:654735497077:web:e95d3917f9a3035db5653c\",\n//   measurementId: \"G-2355KSKVN7\"\n// };\n// export const app = initializeApp(firebaseConfig);\n// export const auth = getAuth();\n// export const storage = getStorage();\n// export const db = getFirestore()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { initializeApp } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getStorage } from \"firebase/storage\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getMessaging, getToken, onMessage } from \"firebase/messaging\"; // Import Firebase Messaging\nimport { useEffect } from \"react\";\n\nconst API_KEY = process.env.REACT_APP_FIREBASE_KEY;\nconst firebaseConfig = {\n  apiKey: API_KEY,\n  authDomain: \"chat-engine-8dbde.firebaseapp.com\",\n  projectId: \"chat-engine-8dbde\",\n  storageBucket: \"chat-engine-8dbde.appspot.com\",\n  messagingSenderId: \"654735497077\",\n  appId: \"1:654735497077:web:e95d3917f9a3035db5653c\",\n  measurementId: \"G-2355KSKVN7\"\n};\n\nconsole.log(API_KEY);\nconst requestNotificationPermission = async () => {\n  try {\n    const permission = await Notification.requestPermission();\n    if (permission === \"granted\") {\n      console.log(\"Notification permission granted.\");\n    } else {\n      console.log(\"Notification permission denied.\");\n    }\n  } catch (error) {\n    console.error(\"Error requesting notification permission:\", error);\n  }\n};\nrequestNotificationPermission();\n// Initialize Firebase\nexport const app = initializeApp(firebaseConfig);\nexport const auth = getAuth();\nexport const storage = getStorage();\nexport const db = getFirestore();\n\n// Initialize Firebase Messaging\nconst messaging = getMessaging();\n\n// Request permission to receive notifications\n\n\n// Get the FCM token for the user\nconst getFCMToken = async () => {\n  try {\n    const token = await getToken(messaging);\n    console.log(\"FCM Token:\", token);\n  } catch (error) {\n    console.error(\"Error getting FCM token:\", error);\n  }\n};\n\n// Handle incoming notifications\nconst handleNotifications = () => {\n  onMessage(messaging, (payload) => {\n    console.log(\"Received a notification:\", payload);\n    // You can customize how to handle the incoming notification here\n    // For example, display a notification to the user\n    const { title, body } = payload.notification;\n    new Notification(title, { body });\n  });\n};\n\n// Component to initialize notification setup\nconst FirebaseNotificationSetup = () => {\n  useEffect(() => {\n    requestNotificationPermission();\n    getFCMToken();\n    handleNotifications();\n  }, []);\n\n  return null;\n};\n\nexport default FirebaseNotificationSetup;\n"]},"metadata":{},"sourceType":"module"}